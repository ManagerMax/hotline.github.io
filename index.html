<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f2f5f9;
            margin: 0;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 24px;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 18px;
            max-width: 420px;
            margin: auto;
        }

        .card {
            background: white;
            padding: 22px;
            border-radius: 14px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.07);
            text-align: center;
            cursor: pointer;
            transition: 0.2s;
        }

        .card:hover {
            transform: scale(1.02);
        }

        .card h2 {
            margin-top: 0;
        }

        .back {
            margin: 12px auto 0;
            display: block;
            width: 100%;
            max-width: 420px;
            padding: 12px;
            border-radius: 10px;
            border: none;
            background: #dadde2;
            cursor: pointer;
            font-size: 16px;
        }

        .btn {
            background: #2b8cff;
            color: white;
            padding: 14px;
            border: none;
            width: 100%;
            border-radius: 10px;
            font-size: 17px;
            cursor: pointer;
        }

        .btn:active {
            background: #1b6edb;
        }

        .form-field {
            margin-bottom: 14px;
            text-align: left;
        }

        .form-field label {
            font-size: 14px;
            color: #555;
        }

        .form-field input, .form-field textarea {
            width: 100%;
            padding: 12px;
            margin-top: 6px;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 16px;
        }
    </style>
</head>
<body>

<div id="screen-main">
    <h1>–°–µ—Ä–≤–∏—Å—ã</h1>

    <div class="grid">
        <div class="card" onclick="openHotline()">
            <h2>üìû –ì–æ—Ä—è—á–∞—è –ª–∏–Ω–∏—è</h2>
            <p>–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∑–≤–æ–Ω–∏—Ç—å 117</p>
        </div>

        <div class="card" onclick="openMinister()">
            <h2>üßë‚Äç‚öñÔ∏è –ó–∞–ø–∏—Å—å –∫ –º–∏–Ω–∏—Å—Ç—Ä—É</h2>
            <p>–û—Å—Ç–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É –Ω–∞ –ª–∏—á–Ω—ã–π –ø—Ä–∏—ë–º</p>
        </div>

        <div class="card" onclick="openAdmin()">
            <h2>üèõ –û–±—Ä–∞—â–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏</h2>
            <p>–°–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ</p>
        </div>
    </div>
</div>

<!-- ================= –≠–ö–†–ê–ù –ì–û–†–Ø–ß–ï–ô –õ–ò–ù–ò–ò ================= -->

<div id="screen-hotline" style="display:none;">
    <h1>–ì–æ—Ä—è—á–∞—è –ª–∏–Ω–∏—è</h1>

    <div class="card">
        <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã —Å—Ä–∞–∑—É –Ω–∞–±—Ä–∞—Ç—å –Ω–æ–º–µ—Ä 117</p>
        <button class="btn" onclick="call117()">üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å 117</button>
    </div>

    <button class="back" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<!-- ================= –≠–ö–†–ê–ù –ó–ê–ü–ò–°–ò –ö –ú–ò–ù–ò–°–¢–†–£ ================= -->

<div id="screen-minister" style="display:none;">
    <h1>–ó–∞–ø–∏—Å—å –∫ –º–∏–Ω–∏—Å—Ç—Ä—É</h1>

    <div class="card" style="text-align:left;">
        <div class="form-field">
            <label>–§–ò–û</label>
            <input id="fio" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
        </div>

        <div class="form-field">
            <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
            <input id="phone" placeholder="+7 999 123-45-67">
        </div>

        <div class="form-field">
            <label>–¢–µ–º–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è</label>
            <textarea id="topic" rows="4" placeholder="–û–ø–∏—à–∏—Ç–µ —Ç–µ–º—É –≤—Å—Ç—Ä–µ—á–∏"></textarea>
        </div>

        <button class="btn" onclick="sendMinisterRequest()">üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
    </div>

    <button class="back" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<!-- ================= –≠–ö–†–ê–ù –û–ë–†–ê–©–ï–ù–ò–Ø –ê–î–ú–ò–ù–ò–°–¢–†–ê–¶–ò–ò ================= -->

<div id="screen-admin" style="display:none;">
    <h1>–û–±—Ä–∞—â–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏</h1>

    <div class="card">
        <p>–§—É–Ω–∫—Ü–∏—è —Å–∫–æ—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è.</p>
    </div>

    <button class="back" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<!-- ================= JS –õ–û–ì–ò–ö–ê ================= -->
<script>
    function show(screen) {
        document.querySelectorAll("div[id^='screen']").forEach(s => s.style.display = "none");
        document.getElementById(screen).style.display = "block";
    }

    function openHotline() {
        show("screen-hotline");
    }

    function openMinister() {
        show("screen-minister");
    }

    function openAdmin() {
        show("screen-admin");
    }

    function goBack() {
        show("screen-main");
    }

    function call117() {
        window.location.href = "tel:117";
    }
    
    function sendMinisterRequest() {
        let fio = document.getElementById("fio").value.trim();
        let phone = document.getElementById("phone").value.trim();
        let topic = document.getElementById("topic").value.trim();

        if (!fio || !phone || !topic) {
            alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è.");
            return;
        }

        fetch("http://192.168.1.45:8000/minister_request", {  // –ø–æ–º–µ–Ω—è—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({fio, phone, topic, user_id: "web"})
        })
        .then(res => res.json())
        .then(data => {
            if (data.status === "ok") {
                alert("–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!");
            } else {
                alert("–û—à–∏–±–∫–∞: " + data.message);
            }
            goBack();
        })
        .catch(err => {
            console.error(err);
            alert("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏");
        });
    }

</script>

</body>
</html>
